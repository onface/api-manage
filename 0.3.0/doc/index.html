<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="stylesheet" href="theme/face/face.css">
<meta name="keywords" content="">
<meta name="description" content="better-api">
<title>better-api</title>
</head>
<body>
<div class="face-one-head">
    <a class="face-one-head-logo" href="../index.html">
        <img src="theme/media/logo.svg" alt="" class="face-one-head-logo-photo" />
        face
    </a>
    <span class="face-one-head-slogan">
        Write less code, do more things!
    </span>
    <!-- <div class="face-one-head-search">
        <span class="face-one-head-search-icon fi fi-search"></span>
        <input type="text" class="face-one-head-search-input" placeholder="搜索..." />
    </div> -->
    <div class="face-one-head-nav">
        <span class="face-one-head-nav-switch fi fi-bars"></span>
        <div class="face-one-head-nav-F-cnt">
            <a href="../index.html" class="face-one-head-nav-link">首页</a>
            <a href="intro.html" class="face-one-head-nav-link">指引</a>
            <a href="index.html" class="face-one-head-nav-link">文档</a>
        </div>
        <script>
        Array.from(document.querySelectorAll('.face-one-head-nav-link')).forEach(function (node) {
            if (node.href) {
                var pathname = node.href.replace(/\?.*/, '')
                if (pathname === location.origin + location.pathname) {
                    node.setAttribute('class', node.getAttribute('class') + ' ' + 'face-one-head-nav-link--on')
                }
            }
        })
        </script>
    </div>
</div>

<div class="face-one-layout">
<div class="face-one-layout-F-line">
<div class="face-one-layout-sidebar">
<div class="face-one-nav">
<span class="face-one-nav-switch fi fi-angle-double-right"></span>
<div class="face-one-nav-F-inner">
<div class="face-one-nav-item face-one-nav-item--on">
    <a href="intro.html" class="face-one-nav-item-label">指引</a>
</div>
<!-- face-one-nav-item--group-on 控制默认展开 -->
<div class="face-one-nav-item face-one-nav-item--group face-one-nav-item--group-on">
    <span class="face-one-nav-item-switch fi fi-angle-down"></span>
    <span class="face-one-nav-item-label">
        文档
    </span>
    <div class="face-one-nav-item-group">
        <a href="index.html" class="face-one-nav-item-group-item">索引</a>
    </div>
</div>

</div>
</div>
</div>
<div class="face-one-layout-cnt">
<div id="face-one-cnt" class="face-one-cnt markdown-body">
<div id="face-one-sidebar" class="face-one-sidebar"></div>
<h1 id="better-api" ><a class="markrun-anchor" href="../Users/nimo/Documents/git/better-api/#better-api"><span class="markrun-anchor-link"></span></a>better-api</h1><h2 id="jquery" ><a class="markrun-anchor" href="../Users/nimo/Documents/git/better-api/#jquery"><span class="markrun-anchor-link"></span></a>jquery</h2><div class="markrun markrun--html">
<div class="markrun-html"></div>
<div class="markrun-code">
<button id="jquery-pass" >pass</button>
<button id="jquery-fail" >fail</button>
<button id="jquery-fail-detailAction" >fail (defaultAction)</button>
<hr />
<button id="jquery-net-fail" >net.fail</button>
<button id="jquery-net-fail-custom" >net.fail(custom)</button>
<button id="jquery-net-fail-defaultAction" >net.fail (defaultAction)</button>
<hr />
<button id="jquery-abort" >abort</button>
<button id="jquery-loading" >loading</button></div>
<div class="markrun-source">
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-pass"</span> &gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-fail"</span> &gt;</span>fail<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-fail-detailAction"</span> &gt;</span>fail (defaultAction)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-net-fail"</span> &gt;</span>net.fail<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-net-fail-custom"</span> &gt;</span>net.fail(custom)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-net-fail-defaultAction"</span> &gt;</span>net.fail (defaultAction)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-abort"</span> &gt;</span>abort<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-loading"</span> &gt;</span>loading<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre></div>
</div>

    <div class="face-one-code ">
                        <div class="face-one-code-example">
                            
                        </div>
                        <div class="face-one-code-info">
                            <div class="face-one-code-info-title">jquery</div>
                            <div class="face-one-code-info-desc">
                                
                            </div>
                            <span class="face-one-code-info-switchCode fi fi-code"></span>
                        </div>
                        <div class="face-one-code-source">
                            <div class="face-one-code-source-tool">
                                <span class="face-one-code-source-tool-copy fi fi-files-o"></span>
                            </div>
                            <pre><code class="lang-js"><span class="hljs-keyword">var</span> BetterAPI = <span class="hljs-built_in">require</span>(<span class="hljs-string">'better-api'</span>)
<span class="hljs-keyword">var</span> $ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'jquery'</span>)
<span class="hljs-keyword">var</span> message = <span class="hljs-built_in">require</span>(<span class="hljs-string">'face-message'</span>)
<span class="hljs-keyword">var</span> api = <span class="hljs-keyword">new</span> BetterAPI({
    <span class="hljs-attr">defaultSettings</span>: {
        <span class="hljs-attr">dataType</span>: <span class="hljs-string">'json'</span>
    },
    <span class="hljs-attr">loading</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">isLoading, failArg</span>) </span>{
        <span class="hljs-keyword">if</span> (isLoading) {
            message.loadingBar.show(<span class="hljs-number">2</span>)
        }
        <span class="hljs-comment">// failArg = [jqXHR, textStatus, errorThrown]</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (failArg[<span class="hljs-number">1</span>] !== <span class="hljs-string">'abort'</span>) {
            message.loadingBar.fail()
        }
        <span class="hljs-comment">// else if (failArg[1] === 'abort') {</span>
        <span class="hljs-comment">//     message.loadingBar.hide()</span>
        <span class="hljs-comment">// }</span>
        <span class="hljs-keyword">else</span> {
            message.loadingBar.hide()
        }
    },
    <span class="hljs-attr">input</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req</span>) </span>{
        <span class="hljs-keyword">return</span> req
    },
    <span class="hljs-attr">output</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res, req</span>) </span>{
        <span class="hljs-keyword">return</span> res
    },
    <span class="hljs-attr">fetch</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data, settings, callback</span>) </span>{
        settings.data = data
        <span class="hljs-keyword">return</span> $.ajax(settings)
                .done(callback.net.done)
                .fail(callback.net.fail)
                .always(callback.after)
    },
    <span class="hljs-attr">defaultCallback</span>: {
        <span class="hljs-attr">net</span>: {
            <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jqXHR, textStatus</span>) </span>{
                <span class="hljs-keyword">switch</span>(textStatus) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'timeout'</span>:
                        message.error(<span class="hljs-string">'网络超时'</span>)
                    <span class="hljs-keyword">break</span>
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'abort'</span>:
                    <span class="hljs-keyword">break</span>
                    <span class="hljs-keyword">default</span>:
                        message.error(<span class="hljs-string">'网络错误'</span>)
                }

            }
        }
    },
    <span class="hljs-attr">judgeResponseType</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
        <span class="hljs-keyword">return</span> res.status
    },
    <span class="hljs-attr">defaultResponseType</span>: {
        <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            message.success(<span class="hljs-string">'操作成功'</span>)
        },
        <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
            message.error(<span class="hljs-string">'fail:'</span> + res.msg)
        },
        <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
            message.error(<span class="hljs-string">'error:'</span> + res.msg)
        }
    }
})
<span class="hljs-keyword">var</span> apiPass = api.create({
    <span class="hljs-attr">settings</span>: {
        <span class="hljs-attr">url</span>: <span class="hljs-string">'http://118.25.125.213:9823/onface/better-api/master/doc/mock/pass'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'get'</span>
    }
})
<span class="hljs-keyword">var</span> apiFail = api.create({
    <span class="hljs-attr">settings</span>: {
        <span class="hljs-attr">url</span>: <span class="hljs-string">'http://118.25.125.213:9823/onface/better-api/master/doc/mock/fail'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'get'</span>
    }
})
<span class="hljs-keyword">var</span> apiNetFail = api.create({
    <span class="hljs-attr">settings</span>: {
        <span class="hljs-attr">url</span>: <span class="hljs-string">'/404'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'get'</span>
    }
})
<span class="hljs-keyword">var</span> apiDelay = api.create({
    <span class="hljs-attr">settings</span>: {
        <span class="hljs-attr">url</span>: <span class="hljs-string">'http://118.25.125.213:9823/onface/better-api/master/doc/mock/pass?$delay=1000'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'get'</span>
    }
})
$(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    $(<span class="hljs-string">'#jquery-pass'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        apiPass(
            <span class="hljs-comment">// data</span>
            {
                <span class="hljs-attr">name</span>: <span class="hljs-string">'nimo'</span>
            },
            <span class="hljs-comment">// callback</span>
            {
                <span class="hljs-attr">pass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                    message.success(<span class="hljs-string">'操作成功'</span>)
                },
                <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
                    message.error(res.msg)
                }
            }
        )
    })
    $(<span class="hljs-string">'#jquery-fail'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        apiFail(
            <span class="hljs-comment">// data</span>
            {
                <span class="hljs-attr">name</span>: <span class="hljs-string">'nimo'</span>
            },
            <span class="hljs-comment">// callback</span>
            {
                <span class="hljs-attr">pass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                    alert(<span class="hljs-string">'操作成功'</span>)
                },
                <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
                    message.error(res.msg)
                }
            }
        )
    })
    $(<span class="hljs-string">'#jquery-fail-detailAction'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        apiFail(
            <span class="hljs-comment">// data</span>
            {
                <span class="hljs-attr">name</span>: <span class="hljs-string">'nimo'</span>
            },
            <span class="hljs-comment">// callback</span>
            {
                <span class="hljs-attr">pass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                    message.success(<span class="hljs-string">'操作成功'</span>)
                },
                <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
                    <span class="hljs-keyword">this</span>.defaultAction()
                    message.error(<span class="hljs-string">'More message (fail)'</span>)
                }
            }
        )
    })
    $(<span class="hljs-string">'#jquery-net-fail'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        apiNetFail()
    })
    $(<span class="hljs-string">'#jquery-net-fail-custom'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        apiNetFail({}, {}, {
            <span class="hljs-attr">net</span>: {
                <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                    message.error(<span class="hljs-string">'（自定义）网络错误'</span>)
                }
            }
        })
    })
    $(<span class="hljs-string">'#jquery-net-fail-defaultAction'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        apiNetFail({}, {}, {
            <span class="hljs-attr">net</span>: {
                <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">this</span>.defaultAction()
                    message.error(<span class="hljs-string">'More message ($net.fail)'</span>)
                }
            }
        })
    })
    $(<span class="hljs-string">"#jquery-abort"</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> api = apiDelay({}, {}, {
            <span class="hljs-attr">net</span>: {
                <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>)
                }
            }
        })
        api.abort()
    })
    $(<span class="hljs-string">'#jquery-loading'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        apiDelay({}, {}, {
            <span class="hljs-attr">loading</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">isLoading</span>) </span>{
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'isLoading'</span>, isLoading)
            }
        })
    })
})

</code></pre>
                        </div>
                        
                    </div>
                                
<h2 id="axios" ><a class="markrun-anchor" href="../Users/nimo/Documents/git/better-api/#axios"><span class="markrun-anchor-link"></span></a>axios</h2><div class="markrun markrun--html">
<div class="markrun-html"></div>
<div class="markrun-code">
<button id="axios-timeout">timeout</button>
<button id="axios-404">not found</button>
<button id="axios-abort">abort</button></div>
<div class="markrun-source">
<pre><code class="lang-html">&lt;<span class="hljs-keyword">button</span> id=<span class="hljs-string">"axios-timeout"</span>&gt;timeout&lt;/<span class="hljs-keyword">button</span>&gt;
&lt;<span class="hljs-keyword">button</span> id=<span class="hljs-string">"axios-404"</span>&gt;<span class="hljs-keyword">not</span> found&lt;/<span class="hljs-keyword">button</span>&gt;
&lt;<span class="hljs-keyword">button</span> id=<span class="hljs-string">"axios-abort"</span>&gt;abort&lt;/<span class="hljs-keyword">button</span>&gt;
</code></pre></div>
</div>

    <div class="face-one-code ">
                        <div class="face-one-code-example">
                            
                        </div>
                        <div class="face-one-code-info">
                            <div class="face-one-code-info-title">axios</div>
                            <div class="face-one-code-info-desc">
                                
                            </div>
                            <span class="face-one-code-info-switchCode fi fi-code"></span>
                        </div>
                        <div class="face-one-code-source">
                            <div class="face-one-code-source-tool">
                                <span class="face-one-code-source-tool-copy fi fi-files-o"></span>
                            </div>
                            <pre><code class="lang-js"><span class="hljs-keyword">var</span> BetterAPI = <span class="hljs-built_in">require</span>(<span class="hljs-string">'better-api'</span>)
<span class="hljs-keyword">var</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">'axios'</span>)
<span class="hljs-keyword">var</span> message = <span class="hljs-built_in">require</span>(<span class="hljs-string">'face-message'</span>)
<span class="hljs-keyword">var</span> CancelToken = axios.CancelToken

<span class="hljs-keyword">var</span> api = <span class="hljs-keyword">new</span> BetterAPI({
    <span class="hljs-attr">defaultSettings</span>: {
        <span class="hljs-attr">dataType</span>: <span class="hljs-string">'json'</span>
    },
    <span class="hljs-attr">loading</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">isLoading, failArg</span>) </span>{
        <span class="hljs-comment">// console.log(failArg)</span>
        <span class="hljs-comment">// if (isLoading) {</span>
        <span class="hljs-comment">//     message.loadingBar.show(2)</span>
        <span class="hljs-comment">// }</span>
        <span class="hljs-comment">// // failArg = [jqXHR, textStatus, errorThrown]</span>
        <span class="hljs-comment">// else if (failArg[1] !== 'abort') {</span>
        <span class="hljs-comment">//     message.loadingBar.fail()</span>
        <span class="hljs-comment">// }</span>
        <span class="hljs-comment">// // else if (failArg[1] === 'abort') {</span>
        <span class="hljs-comment">// //     message.loadingBar.hide()</span>
        <span class="hljs-comment">// // }</span>
        <span class="hljs-comment">// else {</span>
        <span class="hljs-comment">//     message.loadingBar.hide()</span>
        <span class="hljs-comment">// }</span>
    },
    <span class="hljs-attr">input</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req</span>) </span>{
        <span class="hljs-keyword">return</span> req
    },
    <span class="hljs-attr">output</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res, req</span>) </span>{
        <span class="hljs-keyword">return</span> res
    },
    <span class="hljs-attr">fetch</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data, settings, callback</span>) </span>{
        settings.data = data
        settings.method = settings.type.toUpperCase()
        <span class="hljs-keyword">if</span> (settings.method === <span class="hljs-string">'GET'</span>) {
            <span class="hljs-comment">// settings.url = `${settings.url}?${qs.stringify(settings.data)}`</span>
            settings.params = data
            <span class="hljs-keyword">delete</span> settings.data
        }
        <span class="hljs-keyword">let</span> axiosCencel
        settings.cancelToken = <span class="hljs-keyword">new</span> CancelToken(<span class="hljs-function">(<span class="hljs-params">cancel</span>) =&gt;</span> {
            axiosCencel = cancel
        })

        axios(settings)
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
            callback.net.done(res.data)
            callback.after()
        })
        .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>)</span>{
            callback.after()
            <span class="hljs-keyword">if</span> (error.response || error.request || error.message === <span class="hljs-string">'abort'</span>) {
                callback.net.fail(error)
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> error
            }
        })
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">abort</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> axiosCencel === <span class="hljs-string">'function'</span>) {
                    axiosCencel(<span class="hljs-string">'abort'</span>)
                }
            }
        }

    },
    <span class="hljs-attr">defaultCallback</span>: {
        <span class="hljs-attr">net</span>: {
            <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>{
                <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/timeout/</span>.test(error.message)) {
                     message.error(<span class="hljs-string">'网络超时'</span>)
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/abort/</span>.test(error.message)) {
                    <span class="hljs-comment">// cancel request</span>
                }
                <span class="hljs-keyword">else</span> {
                    message.error(<span class="hljs-string">'网络错误'</span> + error.message)
                }
            }
        }
    },
    <span class="hljs-attr">judgeResponseType</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
        <span class="hljs-keyword">return</span> res.status
    },
    <span class="hljs-attr">defaultResponseType</span>: {
        <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            message.success(<span class="hljs-string">'操作成功'</span>)
        },
        <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
            message.error(<span class="hljs-string">'fail:'</span> + res.msg)
        },
        <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
            message.error(<span class="hljs-string">'error:'</span> + res.msg)
        }
    }
})

<span class="hljs-keyword">var</span> apiTimeout = api.create({
    <span class="hljs-attr">settings</span>: {
        <span class="hljs-attr">url</span>: <span class="hljs-string">'http://118.25.125.213:9823/onface/better-api/master/doc/mock/pass?$delay=1000'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'get'</span>,
        <span class="hljs-attr">timeout</span>: <span class="hljs-number">400</span>
    }
})

$(<span class="hljs-string">'#axios-timeout'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    apiTimeout()
})

<span class="hljs-keyword">var</span> apiNotfound = api.create({
    <span class="hljs-attr">settings</span>: {
        <span class="hljs-attr">url</span>: <span class="hljs-string">'/errorUrl'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'get'</span>,
        <span class="hljs-attr">timeout</span>: <span class="hljs-number">400</span>
    }
})

$(<span class="hljs-string">'#axios-404'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    apiNotfound()
})


<span class="hljs-keyword">var</span> apiAbort = api.create({
    <span class="hljs-attr">settings</span>: {
        <span class="hljs-attr">url</span>: <span class="hljs-string">'http://118.25.125.213:9823/onface/better-api/master/doc/mock/pass?$delay=1000'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'get'</span>
    }
})


$(<span class="hljs-string">'#axios-abort'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> reqeust = apiAbort(
        {},
        {},
        {
            <span class="hljs-attr">loading</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">isLoading, failArg</span>) </span>{
                <span class="hljs-keyword">if</span> (isLoading) {
                    message.loadingBar.show()
                }
                <span class="hljs-keyword">else</span> {
                    message.loadingBar.hide()
                }
            }
        }
    )
    reqeust.abort()

})

</code></pre>
                        </div>
                        
                    </div></div>
</div>
</div>
</div>
<script>
Array.from(document.querySelectorAll('.face-one-nav-item-label')).forEach(function (node) {
    if (node.href) {
        var pathname = node.href.replace(/\?.*/, '')
        if (pathname === location.origin + location.pathname + location.hash) {
            node.setAttribute('class', node.getAttribute('class') + ' ' + 'face-one-nav-item-label--on')
        }
    }
})
var faceOneGetParent = function faceOneGetParent (el, className) {
   if (el.parentNode.nodeName.toLowerCase() === 'html') {
       return null
   }
   var parentClassName = el.parentNode.getAttribute('class')
   var classNames = ''
   if (parentClassName) {
       classNames = parentClassName.split(' ')
   }
   if (classNames.indexOf(className) !== -1) {
       return el.parentNode
   }
   else {
       return faceOneGetParent(el.parentNode, className)
   }
}
Array.from(document.querySelectorAll('.face-one-nav-item-group-item')).forEach(function (node) {
    addAvativeClass(node)
    function addAvativeClass (node)  {
        if (node.href) {
            var pathname = node.href.replace(/\?.*/, '')
            if (pathname === location.origin + location.pathname + location.hash) {
                node.setAttribute('class', node.getAttribute('class') + ' ' + 'face-one-nav-item-group-item--on')
                var parentNode = faceOneGetParent(node, 'face-one-nav-item--group')
                if (parentNode) {
                    parentNode.setAttribute('class', parentNode.getAttribute('class') + ' ' + 'face-one-nav-item--group-on')
                }
            }
        }
    }

})
</script>
<div class="face-one-foot">
    <div class="face-one-foot-F-inner">
        <div class="face-one-foot-group">
            <div class="face-one-foot-group-title">
                <span class="face-one-foot-group-title-icon fi fi-github"></span>
                Github
            </div>
            <div class="face-one-foot-group-item">
                <a href="https://github.com/onface/better-api" class="face-one-foot-group-item-link">better-api</a>
                - 项目源码
            </div>
        </div>
        <div class="face-one-foot-group">
            <div class="face-one-foot-group-title">
                <span class="face-one-foot-group-title-icon fi fi-link"></span>
                相关站点
            </div>
            <div class="face-one-foot-group-item">
                <a href="https://github.com/onface/module" class="face-one-foot-group-item-link">module</a>
                - 开源项目脚手架
            </div>
            <div class="face-one-foot-group-item">
                <a href="http://onface.cc/" class="face-one-foot-group-item-link">onface.cc</a>
                - 资源集合
            </div>
        </div>
        <div class="face-one-foot-group">
            <div class="face-one-foot-group-title">
                <span class="face-one-foot-group-title-icon fi fi-users"></span>
                社区
            </div>
            <div class="face-one-foot-group-item">
                <a href="https://github.com/onface/better-api/issues" class="face-one-foot-group-item-link">Github issues</a>
            </div>
            <div class="face-one-foot-group-item">
                <a href="https://github.com/onface/better-api/issues/new" class="face-one-foot-group-item-link">提交bug</a>
            </div>
        </div>
        <div class="face-one-foot-copyright">
            <a href="../index.html" class="face-one-foot-copyright-title">
                <img src="theme/media/logo.svg" class="face-one-foot-copyright-title-logo" />
            </a>
        </div>
    </div>
</div>

<script src="theme/jquery.js"></script>
<script>delete window.$</script>
<script src="theme/face/face.js" ></script>
<script data-markrun-lastrun="true">
                        document.write('<scri' + 'pt src="./jquery.demo.js?v=0.3.0"' + '" ></sc' + 'ript>')
                        </script><script data-markrun-lastrun="true">
                        document.write('<scri' + 'pt src="./axios.demo.js?v=0.3.0"' + '" ></sc' + 'ript>')
                        </script></body>
</html>